<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <title>LR - Login</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <th:block th:replace="~{fragments/header_link :: header_link}" />
</head>

<body>
    <div class="container-xxl bg-white p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->


        <!-- Navbar Start -->
        <th:block th:replace="~{fragments/navigator :: navigator}" />
        <!-- Navbar End -->


        <!-- Header Start -->
        <div class="container-fluid header bg-white p-0">
            <div class="row g-0 align-items-center flex-column-reverse flex-md-row">
                <div class="col-md-6 p-5 mt-lg-5">
                    <h1 class="display-5 animated fadeIn mb-4">어서오세요</h1>
                    <nav aria-label="breadcrumb animated fadeIn">
                        
                    </nav>
                </div>
                <div class="col-md-6 animated fadeIn">
                    <img class="img-fluid" src="/site/img/header.jpg" alt="">
                </div>
            </div>
        </div>
        <!-- Header End -->

        <!-- Login Start -->
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6 card card-info">
                    <div class="card-header">
                        <h3 class="card-title">로그인</h3>
                    </div>
                    <form id="form1" class="form-horizontal">
                        <div class="card-body">
                            <div class="form-group row">
                                <label for="inputEmail3" class="col-sm-3 col-form-label" >아이디</label>
                                <div class="col-sm-9">
                                    <input type="email" class="form-control" id="inputEmail3" placeholder="아이디" name="uid">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="inputPassword3" class="col-sm-3 col-form-label">비밀번호</label>
                                <div class="col-sm-9">
                                    <input type="password" class="form-control" id="inputPassword3" placeholder="비밀번호" name="password">
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <button type="button" class="btn btn-info btn-block" id="bt_login">로그인</button>
                            <button type="button" class="btn btn-default btn-block mt-3" id="bt_regist">회원가입</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="row justify-content-center mt-4">
                <div class="col-md-6">
                    <div class="login__social__links">
                        <p class="text-center">또는</p>
                        <ul class="list-unstyled d-flex justify-content-between">
                            <li style="flex: 1;">
							    <a href="javascript:getAuthForm('naver')" class="btn btn-block btn-outline-success">
							        <i class="fa fa-naver"> 네이버로 로그인</i>
							    </a>
							</li>	
                            <li style="flex: 1; margin-left: 10px;">
                                <a href="javascript:getAuthForm('google')" class="btn btn-block btn-outline-danger">
                                    <i class="fa fa-google"></i> 구글로 로그인
                                </a>
                            </li>
                            <li style="flex: 1; margin-left: 10px;">
                                <a href="javascript:getAuthForm('kakao')" class="btn btn-block btn-outline-warning">
                                    <i class="fa fa-kakao"></i> 카카오로 로그인
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- Login End -->

        <!-- Footer Start -->
        <th:block th:replace="~{fragments/footer :: footer}"/>
        <!-- Footer End -->


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>

	<th:block th:replace="~{fragments/footer_link :: footer_link}" />

</body>

</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript">
	function getAuthForm(sns) {
		console.log("/rest/member/authform/" + sns);		
		$.ajax({
			url : "/rest/member/authform/" + sns,
			type : "GET",
			success : function(result, status, xhr) {
				location.href = result;
			}
		});
	}

	/* function login() {
		$("#form1").attr({
			action : "/member/login",
			method : "post"
		});
		$("#form1").submit();
	} */
	function login(){
		$.ajax({
			url:"/member/login",
			type:"post",
			data:$("#form1").serialize(),
			success:function(result, status, xhr){
				console.log("jwt 토큰 : " + result.token);
				localStorage.setItem("token", result.token);
			}
		});
	}

	$(function() {
		$("#bt_login").click(function() {
			login();
		});
		$("#bt_regist").click(function() {
			location.href = "/member/registform";
		})
	});
</script>